# wordpres4.8.3

sudo su;
apt-get update y;
apt-get install nginx;
apt-get install php-fpm php-mysql php-zip php-xml php-curl unzip git;

sudo amazon-linux-extras install -y lamp-mariadb10.2-php7.2 php7.2

# for WinSCP SFTP settings for permissions
su -c /usr/libexec/openssh/sftp-server

nano /etc/php.ini
#Uncomment and change default value 1 for 0 on cgi.fix_pathinfo=0, search with ctrl+w on nano editor.

cgi.fix_pathinfo=0;

#change the default upload_max_filesize = 2M, search with ctrl+w on nano editor. 
upload_max_filesize = 64M 

#change the default post_max_filesize = 8M, search with ctrl+w on nano editor. 

post_max_filesize = 64M

nano /etc/nginx/sites-available/default

#add index.php to processing

index index.php index.html index.htm index.nginx-debian.html;

#add php location

location ~ \.php$ {
    include snippets/fastcgi-php.conf;
    fastcgi_pass unix:/run/php/php7.0-fpm.sock;
}

location ~ /\.ht {
    deny all;
}

 systemctl restart php7.0-fpm
 systemctl reload nginx

cd /var/www/html
git clone https://github.com/esdrasrios/wordpres4.8.3.git .

#install wordpress

nano /etc/nginx/sites-available/default

location / {  
#try_files $uri $uri/ =404;  
try_files $uri $uri/ /index.php$is_args$args;  
}

nano /etc/nginx/nginx.conf
#add to http section
client_max_body_size 64M;


chown -Rf www-data:www-data /var/www/html
systemctl restart php7.0-fpm
systemctl reload nginx
